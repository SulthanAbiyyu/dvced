schema: '2.0'
stages:
  dataset:
    cmd: python .\src\stages\dataset.py --config params.yaml
    deps:
    - path: .\src\stages\dataset.py
      md5: 61c4521cc06d5de07ff914be5ac450a5
      size: 977
    params:
      params.yaml:
        base:
          random_state: 42
          target_column: class
        data_load:
          raw_data: data/raw/diabetes_data.csv
        data_split:
          test_size: 0.2
          output_train_path: data/processed/train.csv
          output_test_path: data/processed/test.csv
    outs:
    - path: data/processed/test.csv
      md5: d64bfea0224f54df741a16cc2231c281
      size: 4341
    - path: data/processed/train.csv
      md5: 460c272720de5cfd8736038d052008b7
      size: 16713
  featurize:
    cmd: python .\src\stages\featurize.py --config params.yaml
    deps:
    - path: .\src\stages\featurize.py
      md5: 8e1364a223f356d2fde647782f7dccf9
      size: 1616
    - path: data/processed/test.csv
      md5: d64bfea0224f54df741a16cc2231c281
      size: 4341
    - path: data/processed/train.csv
      md5: 460c272720de5cfd8736038d052008b7
      size: 16713
    params:
      params.yaml:
        data_split:
          test_size: 0.2
          output_train_path: data/processed/train.csv
          output_test_path: data/processed/test.csv
        featurize:
          output_train_features_path: data/processed/train_features.csv
          output_test_features_path: data/processed/test_features.csv
    outs:
    - path: data/processed/test_features.csv
      md5: bc7949726d655c438f23631a1f03d74b
      size: 5613
    - path: data/processed/train_features.csv
      md5: 58230896be00e40388e55c8f30dc160d
      size: 21647
  train:
    cmd: python .\src\stages\train.py --config params.yaml
    deps:
    - path: .\src\stages\train.py
      md5: 6229a6c47ab68bccdfa020c62c8cd785
      size: 1376
    - path: data/processed/test_features.csv
      md5: bc7949726d655c438f23631a1f03d74b
      size: 5613
    - path: data/processed/train_features.csv
      md5: 58230896be00e40388e55c8f30dc160d
      size: 21647
    params:
      params.yaml:
        base:
          random_state: 42
          target_column: class
        featurize:
          output_train_features_path: data/processed/train_features.csv
          output_test_features_path: data/processed/test_features.csv
        train:
          estimator_name: xgboost
          model_path: models/model.joblib
          estimators:
            xgboost:
              params:
                eval_metric: logloss
                n_estimators: 20
                max_depth: 10
                learning_rate: 2.0
                objective: binary:logistic
                seed: 42
    outs:
    - path: models/model.joblib
      md5: 282f8fed7c20e3a6dd5e399d02bc3fde
      size: 24757
  evaluate:
    cmd: python .\src\stages\evaluate.py --config params.yaml
    deps:
    - path: .\src\stages\evaluate.py
      md5: 8bde06c9c48489fc54eba8166d936af7
      size: 1534
    - path: data/processed/test_features.csv
      md5: bc7949726d655c438f23631a1f03d74b
      size: 5613
    - path: models/model.joblib
      md5: 282f8fed7c20e3a6dd5e399d02bc3fde
      size: 24757
    params:
      params.yaml:
        base:
          random_state: 42
          target_column: class
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
          confusion_matrix_file: confusion_matrix.png
        featurize:
          output_train_features_path: data/processed/train_features.csv
          output_test_features_path: data/processed/test_features.csv
        train:
          estimator_name: xgboost
          model_path: models/model.joblib
          estimators:
            xgboost:
              params:
                eval_metric: logloss
                n_estimators: 20
                max_depth: 10
                learning_rate: 2.0
                objective: binary:logistic
                seed: 42
    outs:
    - path: metrics.json
      md5: 80ac8fd6845eb003118bc6d4dc6a05a0
      size: 25
    - path: reports/confusion_matrix.png
      md5: 23cddff0c900eab616861514ce2abe27
      size: 17119
  train_eval:
    cmd: python .\src\stages\train_eval.py --config params.yaml
    deps:
    - path: .\src\stages\train_eval.py
      md5: 8cccc009c5ba9f2c70ce41257c83cfef
      size: 824
    - path: data/processed/test_features.csv
      md5: bc7949726d655c438f23631a1f03d74b
      size: 5613
    - path: data/processed/test_features.csv
      md5: bc7949726d655c438f23631a1f03d74b
      size: 5613
    - path: data/processed/train_features.csv
      md5: 58230896be00e40388e55c8f30dc160d
      size: 21647
    - path: models/model.joblib
      md5: e6ff8ba1b787890330e0a554c818dc8d
      size: 38684
    params:
      params.yaml:
        base:
          random_state: 42
          target_column: class
        evaluate:
          reports_dir: reports
          metrics_file: metrics.json
          confusion_matrix_file: confusion_matrix.png
        featurize:
          output_train_features_path: data/processed/train_features.csv
          output_test_features_path: data/processed/test_features.csv
        train:
          estimator_name: xgboost
          model_path: models/model.joblib
          estimators:
            xgboost:
              params:
                eval_metric: logloss
                n_estimators: 20
                max_depth: 20
                learning_rate: 0.3
                objective: binary:logistic
                seed: 42
    outs:
    - path: metrics.json
      md5: 909d9699caeb65102ac64c53113bd526
      size: 26
    - path: reports/confusion_matrix.png
      md5: 8ebe28fbf694bb5d4cbe618558796560
      size: 17292
